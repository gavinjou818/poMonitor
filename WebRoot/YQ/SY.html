 <!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>南华大学核电舆情系统</title>
<link href="css/SY.css" rel="stylesheet" type="text/css"  />
<link href="css/bootstrap.css" rel="stylesheet" type="text/css"  />
<link href="css/bootstrap-theme.css" rel="stylesheet" type="text/css"  />
<!--在线jq-->
<script src="js/jquery-3.1.1.js" ></script>
<script src="js/bootstrap.js" ></script>
<script src="js/echarts.js" ></script>
<script src="js/china.js"></script>
<script src="js/d3.js"></script>



    <!--加载数据表-->
    <script type="text/javascript">

        var sum = 16;//限制最大条数

        var starttime = new Date();
        var endttime = new Date();

        //图片指向
        var imgsrc = ["image/nev.jpg", "image/cen.jpg", "image/pos.jpg"];

        function initData()
        {


            //最新舆情加载
            $.ajax
            ({
                type: "GET",
                dataType: "json",
                url: "json/newyq.json",
                data: {
                    "starttime": starttime,
                    "endtime": endttime

                },
                success: function (data) {
                    var limit = Math.min(data.length, sum);


                    var parent = document.getElementById('newyq');
                    for (var i = 0; i < limit; i++)
                    {
                        //创建div节点
                        var div1 = document.createElement("div");
                        //创建内嵌节点
                        var span1 = document.createElement("span");
                        //创建图片节点

                        var img1 = document.createElement("img");
                        img1.setAttribute("class", "Logo");
                        img1.setAttribute("src", imgsrc[data[i].tendency]);


                        //创建链接节点
                        var a1=document.createElement("a");
                        a1.setAttribute("href",data[i].alink);
                        a1.innerText=data[i].title;

                        //创建时间节点
                        var span2=document.createElement("span");
                        span2.setAttribute("class","Time");
                        span2.innerText=data[i].time;



                        //组装
                        span1.appendChild(img1);

                        div1.appendChild(span1);
                        div1.appendChild(a1);
                        div1.appendChild(span2);

                        parent.appendChild(div1);
                    }


                }
            });

            //热点舆情加载
            $.ajax
            ({
                type: "GET",
                dataType: "json",
                url: "json/pointyq.json",
                data: {
                    "starttime": starttime,
                    "endtime": endttime

                },
                success: function (data) {
                    var limit = Math.min(data.length, sum);


                    var parent = document.getElementById('pointyq');
                    for (var i = 0; i < limit; i++)
                    {
                        //创建div节点
                        var div1 = document.createElement("div");

                        //创建链接节点
                        var a1=document.createElement("a");
                        a1.setAttribute("href",data[i].alink);
                        a1.innerText=data[i].title;

                        //创建时间节点
                        var span2=document.createElement("span");
                        span2.setAttribute("class","Time");
                        span2.innerText=data[i].time;

                        //组装
                        div1.appendChild(a1);
                        div1.appendChild(span2);
                        parent.appendChild(div1);
                    }


                }
            });


            //每日日报加载
            $.ajax
            ({
                type: "GET",
                dataType: "json",
                url: "json/arthead.json",
                data: {
                    "starttime": starttime,
                    "endtime": endttime

                },
                success: function (data)
                {

                    var barsum=Math.min(6,data.length);//头条最多5条


                    if(barsum<=0) return;
                    var parent = document.getElementById('arthead');
                    parent.innerText=data[0].arthead;

                    parent = document.getElementById('arthead_time');
                    parent.innerText=data[0].arthead_time;

                    parent = document.getElementById('arthead_body');
                    parent.innerText=data[0].arthead_body;

                    //<!--<div class="daliypaper"><a>2014-06-09分析报告</a></div>-->
                    parent =document.getElementById('arthead_rla');
                    for(var i=1;i<barsum;i++)
                    {
                         var div1=document.createElement("div");
                         div1.setAttribute("class","daliypaper");

                         var a1=document.createElement("a");
                         a1.setAttribute("href",data[i].alink);
                         a1.innerText=data[i].title;

                         div1.appendChild(a1);
                         parent.appendChild(div1);
                    }


                }
            });

        }


        function displaySubMenu(li) {
            var subMenu = li.getElementsByTagName("ul")[0];
            subMenu.style.display = "block";
        }
        function hideSubMenu(li) {
            var subMenu = li.getElementsByTagName("ul")[0];
            subMenu.style.display = "none";
        }
    </script>


</head>

<body onload="initData()">


<!--Tbar-->
<div class="Tbar">
    <span>今日总量:</span>&nbsp;<span id="tValue">68754</span>
    <span>敏感:</span>&nbsp;<span id="mValue">230</span>
    <span>非敏感:</span>&nbsp;<span id="nValue">66524</span>
    <span>敏感比重:</span>&nbsp;<span id="iValue">3.4%</span>


    <div class="rfloat">
        <span>时间设定:</span>
        <span><a href="#">今天</a></span>
        &nbsp;
        <span><a href="#">本周</a></span>
        &nbsp;
        <span><a href="#">本月</a></span>
        &nbsp;
        <span><a href="#">时间自定义</a></span>
    </div>
</div>

<!--header-->
<div class="Header">
    <div class="Welcome">
        <span>欢迎 <span class="glyphicon glyphicon-user"></span></span>
        <span id="User">***</span>
        <span id="CandL"><a href="#">改密码<span class="glyphicon glyphicon-hand-left"></span></a>|<a href="#">退出<span class="glyphicon glyphicon-off"></span></a></span>
    </div>
</div>

<!--导航栏-->

<div class="bar-title">

    <div class="bar-status"><a href="SY.html">首页</a></div>
    <div class="bar-status" id="nav" onMouseOver="displaySubMenu(this)" onMouseOut="hideSubMenu(this)">
        <a href="#">舆情分析<span class="caret"></span></a>
        <ul class="nav-block">
            <li><a href="MTFX.html">媒体分析</a></li>
            <li><a href="QGFX.html">情感分析</a></li>
        </ul>

    </div>
    <div class="bar-status"><a href="#">伪舆情分析</a></div>
    <div class="bar-status"><a href="YQYJ.html">舆情预警</a></div>
    <div class="bar-status"  onMouseOver="displaySubMenu(this)" onMouseOut="hideSubMenu(this)">
        <a href="#">舆情报表<span class="caret"></span></a>
        <ul class="nav-block">
            <li><a href="TP.html">时间报表</a></li>
            <li><a href="SP.html">事件报表</a></li>
        </ul>

    </div>
    <div class="bar-status bar-status2"><a href="#">后台管理<span class="glyphicon glyphicon-asterisk"></span></a></div>
</div>



<!--主体-->
  <div class="container" id="pointnewyq">
     <div class="row">
        
       <!--左1 舆情预警|热点舆情-->
       <div class="panel panel-default col-md-6">
         <div class="panel-body pnewyqpanel">
            <div>
              <!--Nav tabs-->
              <ul class="nav nav-tabs" role="tablist">
                 <li role="presentation" class="active"><a href="#newyq" aria-controls="newyq" role="tab" data-toggle="tab">最新舆情</a></li>
                 <li role="presentation"><a href="#pointyq" aria-controls="pointyq" role="tab" data-toggle="tab">热点舆情</a></li>
                 <li id="litoright"><a href="MGYQ.html">more<span class="glyphicon glyphicon-chevron-right"></span></a></li>
              </ul>
              
              <!--Tab panes-->
               
               <div class="tab-content">
                        <!--最新舆情内容-->
                        <div role="tabpanel" class="tab-pane active" id="newyq" style="padding-top:10px">
                            <!--由ajax加载-->
                        </div>
                        <!--热点舆情内容-->
                        <div role="tabpanel" class="tab-pane" id="pointyq" style="padding-top:10px">
                            <!--由ajax加载-->
                        </div>
                </div>
              
            </div>
         </div>
       </div> 
       
       
        <!--右1地域分布-->
         <div class="col-md-6 ">
               <div class="panel panel-primary pnewyqpanel">
                     <div class="panel-heading">
                           <h3 class="panel-title">地域分布图</h3>
                     </div>
                     <!--地域分布图-->
                     <div class="panel-body">
                           <div id="ChinaPiture"></div>
                     </div>
              </div> 
         </div>
              
     </div>
     
     <div class="row">
         
         <!--左2每日报表-->
         <div class="col-md-6">
               <div class="panel panel-primary pnewyqpanel">
                     <div class="panel-heading">
                           <h3 class="panel-title">每日报表</h3>
                     </div>
                     <div class="panel-body">
                        <!--头条-->
                        <div class="art">
                           <img src="image/shili.jpg" id="parg" />
                           <div class="art-title">
                              <h2 id="arthead"></h2>
                              <p class="art-time" id="arthead_time"></p>
                              <p class="art-body" id="arthead_body">
                              </p>
                           </div>
                        </div>
                        
                        <!--相关报告-->
                        <div class="rlapaper" id="arthead_rla">
                         <!--ajax加载-->

                        </div>
                        
                     </div>
              </div> 
         </div>
         
         
       <!--右2 舆情总量|媒体信息走势-->
       <div class="panel panel-default col-md-6">
         <div class="panel-body pnewyqpanel">
            <div>
              <!--Nav tabs-->
              <ul class="nav nav-tabs" role="tablist">
                 <li role="presentation" class="active"><a href="#yqtotal" aria-controls="yqtotal" role="tab" data-toggle="tab">舆情总量</a></li>
                 <li role="presentation"><a href="#tdyq" aria-controls="tdyq" role="tab" data-toggle="tab">媒体信息走势</a></li>
              </ul>
              <!--Tab panes-->
               
               <div class="tab-content">
                        <!--舆情总量内容-->
                        <div role="tabpanel" class="tab-pane active" id="yqtotal">
                            <div id="yqto" style="width:500px;height:380px;"></div>
                        </div>
                        <!--媒体信息走势-->
                        <div role="tabpanel" class="tab-pane" id="tdyq">
                           <div id="medtendency" style="width:500px;height:380px;"></div>
                        </div>
                </div>
              
            </div>
         </div>
       </div> 
         
         
         
         
     
     </div> 
  </div>
<!--foot-->

<div class="foot"> <span class="glyphicon glyphicon-copyright-mark"></span>all right by usc</div>  



        <!--地域分布图-->
        <script type="text/javascript">
        $(document).ready(function() {
            $.ajax({
                type: "GET",
                url:"json/ChinaPiture.json",
                dataType: "json",

                success: function(datt) {

                    var myChart = echarts.init(document.getElementById('ChinaPiture'));


                      option = {
                        title : {
                            text: 'iphone销量',
                            subtext: '纯属虚构',
                            x:'center'
                        },
                        tooltip : {
                            trigger: 'item'
                        },
                        legend: {
                            orient: 'vertical',
                            x:'left',
                            data:datt.legenddata
                        },
                        dataRange: {
                            min: 0,
                            max: 2500,
                            x: 'left',
                            y: 'center',
                            text:['高','低'],           // 文本，默认为数值文本
                            calculable : true
                        },
                        toolbox: {
                            show: true,
                            orient : 'vertical',
                            x: 'right',
                            y: 'center',
                            feature : {
                                mark : {show: true},
                                dataView : {show: true, readOnly: false},
                                restore : {show: true},
                                saveAsImage : {show: true}
                            }
                        },
                        roamController: {
                            show: true,
                            x: 'right',
                            mapTypeControl: {
                                'china': true
                            }
                        },
                        series : [
                            {
                                name: 'iphone3',
                                type: 'map',
                                mapType: 'china',
                                roam: false,
                                itemStyle:{
                                    normal:{label:{show:true}},
                                    emphasis:{label:{show:true}}
                                },
                                data:[
                                    {name: '北京',value: Math.round(Math.random()*1000)},
                                    {name: '天津',value: Math.round(Math.random()*1000)},
                                    {name: '上海',value: Math.round(Math.random()*1000)},
                                    {name: '重庆',value: Math.round(Math.random()*1000)},
                                    {name: '河北',value: Math.round(Math.random()*1000)},
                                    {name: '河南',value: Math.round(Math.random()*1000)},
                                    {name: '云南',value: Math.round(Math.random()*1000)},
                                    {name: '辽宁',value: Math.round(Math.random()*1000)},
                                    {name: '黑龙江',value: Math.round(Math.random()*1000)},
                                    {name: '湖南',value: Math.round(Math.random()*1000)},
                                    {name: '安徽',value: Math.round(Math.random()*1000)},
                                    {name: '山东',value: Math.round(Math.random()*1000)},
                                    {name: '新疆',value: Math.round(Math.random()*1000)},
                                    {name: '江苏',value: Math.round(Math.random()*1000)},
                                    {name: '浙江',value: Math.round(Math.random()*1000)},
                                    {name: '江西',value: Math.round(Math.random()*1000)},
                                    {name: '湖北',value: Math.round(Math.random()*1000)},
                                    {name: '广西',value: Math.round(Math.random()*1000)},
                                    {name: '甘肃',value: Math.round(Math.random()*1000)},
                                    {name: '山西',value: Math.round(Math.random()*1000)},
                                    {name: '内蒙古',value: Math.round(Math.random()*1000)},
                                    {name: '陕西',value: Math.round(Math.random()*1000)},
                                    {name: '吉林',value: Math.round(Math.random()*1000)},
                                    {name: '福建',value: Math.round(Math.random()*1000)},
                                    {name: '贵州',value: Math.round(Math.random()*1000)},
                                    {name: '广东',value: Math.round(Math.random()*1000)},
                                    {name: '青海',value: Math.round(Math.random()*1000)},
                                    {name: '西藏',value: Math.round(Math.random()*1000)},
                                    {name: '四川',value: Math.round(Math.random()*1000)},
                                    {name: '宁夏',value: Math.round(Math.random()*1000)},
                                    {name: '海南',value: Math.round(Math.random()*1000)},
                                    {name: '台湾',value: Math.round(Math.random()*1000)},
                                    {name: '香港',value: Math.round(Math.random()*1000)},
                                    {name: '澳门',value: Math.round(Math.random()*1000)}
                                ]
                            },
                            {
                                name: 'iphone4',
                                type: 'map',
                                mapType: 'china',
                                itemStyle:{
                                    normal:{label:{show:true}},
                                    emphasis:{label:{show:true}}
                                },
                                data:[
                                    {name: '北京',value: Math.round(Math.random()*1000)},
                                    {name: '天津',value: Math.round(Math.random()*1000)},
                                    {name: '上海',value: Math.round(Math.random()*1000)},
                                    {name: '重庆',value: Math.round(Math.random()*1000)},
                                    {name: '河北',value: Math.round(Math.random()*1000)},
                                    {name: '安徽',value: Math.round(Math.random()*1000)},
                                    {name: '新疆',value: Math.round(Math.random()*1000)},
                                    {name: '浙江',value: Math.round(Math.random()*1000)},
                                    {name: '江西',value: Math.round(Math.random()*1000)},
                                    {name: '山西',value: Math.round(Math.random()*1000)},
                                    {name: '内蒙古',value: Math.round(Math.random()*1000)},
                                    {name: '吉林',value: Math.round(Math.random()*1000)},
                                    {name: '福建',value: Math.round(Math.random()*1000)},
                                    {name: '广东',value: Math.round(Math.random()*1000)},
                                    {name: '西藏',value: Math.round(Math.random()*1000)},
                                    {name: '四川',value: Math.round(Math.random()*1000)},
                                    {name: '宁夏',value: Math.round(Math.random()*1000)},
                                    {name: '香港',value: Math.round(Math.random()*1000)},
                                    {name: '澳门',value: Math.round(Math.random()*1000)}
                                ]
                            },
                            {
                                name: 'iphone5',
                                type: 'map',
                                mapType: 'china',
                                itemStyle:{
                                    normal:{label:{show:true}},
                                    emphasis:{label:{show:true}}
                                },
                                data:[
                                    {name: '北京',value: Math.round(Math.random()*1000)},
                                    {name: '天津',value: Math.round(Math.random()*1000)},
                                    {name: '上海',value: Math.round(Math.random()*1000)},
                                    {name: '广东',value: Math.round(Math.random()*1000)},
                                    {name: '台湾',value: Math.round(Math.random()*1000)},
                                    {name: '香港',value: Math.round(Math.random()*1000)},
                                    {name: '澳门',value: Math.round(Math.random()*1000)}
                                ]
                            }
                        ]
                    };
                    
                    
                    
                    myChart.setOption(option);

                }
            })

        });
        </script>
        
      
        
        <!--媒体信息走势图-->
        <script type="text/javascript">
        $(document).ready(function() {
            $.ajax({
                type: "GET",
                url:"json/medtendency.json",
                dataType: "json",

                success: function(datt) {

                    var myChart = echarts.init(document.getElementById('medtendency'));


                    option = {
                        tooltip : {
                            trigger: 'axis'
                        },
                        legend: {
                    		x:'left',
                            data:datt.legenddata
                        },
                        toolbox: {
                    		orient:'vertical',
                    		itemGap: 2,
                            itemSize: 10,
                            show : true,
                            feature : {
                                mark : {show: true},
                                dataView : {show: true, readOnly: false},
                                magicType : {show: true, type: ['line', 'bar', 'stack', 'tiled']},
                                restore : {show: true},
                                saveAsImage : {show: true}
                            }
                        },
                        calculable : true,
                        xAxis : [
                            {
                                type : 'category',
                                boundaryGap : false,
                                data : datt.xAxis
                            }
                        ],
                        yAxis : [
                            {
                                type : 'value'
                            }
                        ],
                        series : [
                            {
                                name:'邮件营销',
                                type:'line',
                                stack: '总量',
                                data:[120, 132, 101, 134, 90, 230, 210]
                            },
                            {
                                name:'联盟广告',
                                type:'line',
                                stack: '总量',
                                data:[220, 182, 191, 234, 290, 330, 310]
                            },
                            {
                                name:'视频广告',
                                type:'line',
                                stack: '总量',
                                data:[150, 232, 201, 154, 190, 330, 410]
                            },
                            {
                                name:'直接访问',
                                type:'line',
                                stack: '总量',
                                data:[320, 332, 301, 334, 390, 330, 320]
                            },
                            {
                                name:'搜索引擎',
                                type:'line',
                                stack: '总量',
                                data:[820, 932, 901, 934, 1290, 1330, 1320]
                            }
                        ]
                    };
                    
                    
                    myChart.setOption(option);

                }
            })

        });
        </script>
        
        
        <!--舆情总量图-->
        <script type="text/javascript">
        $(document).ready(function() {
            $.ajax({
                type: "GET",
                url:"json/yqto.json",
                dataType: "json",

                success: function(datt) {

                    var myChart = echarts.init(document.getElementById('yqto'));


                      option = {
                          title: {
                              text: '一天用电量分布',
                              subtext: '纯属虚构'
                          },
                          tooltip: {
                              trigger: 'axis'
                          },
                          toolbox: {
                              show: true,
                              feature: {
                                  saveAsImage: {}
                              }
                          },
                          xAxis:  {
                              type: 'category',
                              boundaryGap: false,
                              data: ['00:00', '01:15', '02:30', '03:45', '05:00', '06:15', '07:30', '08:45', '10:00', '11:15', '12:30', '13:45', '15:00', '16:15', '17:30', '18:45', '20:00', '21:15', '22:30', '23:45']
                          },
                          yAxis: {
                              type: 'value',
                              axisLabel: {
                                  formatter: '{value} W'
                              }
                          },
                          
                          series: [
                              {
                                  name:'用电量',
                                  type:'line',
                                  smooth: true,
                                  data: datt.xAxis,
                                 
                              }
                          ]
                      };

                    
                    
                    myChart.setOption(option);

                }
            })

        });
        </script>
        
        


</body>
</html>

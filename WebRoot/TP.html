 <!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>南华大学核电舆情系统</title>
<link href="css/TP.css" rel="stylesheet" type="text/css"  />
<link href="css/bootstrap.css" rel="stylesheet" type="text/css"  />


<!--在线jq-->
<script src="js/jquery-3.1.1.js" ></script>
<script src="js/bootstrap.js" ></script>
<script src="js/examples.js"></script>

<link rel="stylesheet" type="text/css" href="./css/master.css">
<script type="text/javascript" src="./js/master.js"></script>

    <!--加载数据表-->
    <script type="text/javascript">

        var operate=["查看","导出","邮箱发送"];
        var sum=5;//最大页数5;
        var barsum=10;//最大条目数2;
        var pagesum;//总共有的页数
        var curpage=1;//当前页


        function initData(start,dataroot,tparent)
        {

            curpage=start;
            $.ajax
            ({
                type: "GET",
                dataType: "json",
                url: dataroot,
                data:{"curpage":curpage},
                success: function (data)
                {

                    //获取ul节点
                    pagesum=parseInt(data[0].sum/barsum);
                    pagesum+=(data[0].sum%barsum?1:0);
                    var parent=document.getElementById(tparent);//获取对应模块
                    parent=parent.getElementsByTagName("ul");
                    parent=parent[0];


                    //清除节点
                    while(parent.hasChildNodes())parent.removeChild(parent.firstChild);
                    //先清除所有节点


                    // 加入<<节点
                    var son1=document.createElement("li");
                    var son2=document.createElement("a");
                    son2.setAttribute("href","#");
                    son2.innerHTML="&laquo;";
                    if((pagesum-curpage+1)<sum)
                    {
                        start=(pagesum-sum+1);
                        if(start<=0){start=1;}
                    }

                    //确定开始标号范围.
                    if(start-1>0)
                    {
                        son2.addEventListener("click",function () {
                            initData(start-1,dataroot,tparent);
                        });
                    }

                    son1.appendChild(son2);
                    parent.appendChild(son1);

                    var i;
                    for(i=start,DEF=0;DEF<sum&&i<=pagesum;i++,DEF++)//创建导航条,DEF为计数器
                    {
                        var son1=document.createElement("li");
                        var son2=document.createElement("a");
                        son2.setAttribute("href","#");
                        son2.innerText=i;
                        son2.addEventListener("click",function ()
                        {
                            initData(this.innerText,dataroot,tparent);
                        });
                        son1.appendChild(son2);
                        parent.appendChild(son1);
                    }

                    // 加入>>号
                    son1=document.createElement("li");
                    son2=document.createElement("a");
                    son2.setAttribute("href","#");
                    son2.innerHTML="&raquo;";
                    if(i<=pagesum)
                    {
                        son2.addEventListener("click",function ()
                        {
                            initData(i,dataroot,tparent);
                        });
                    }

                    //组装
                    son1.appendChild(son2);
                    parent.appendChild(son1);



                    //下面是加载数据


                    var parent2=document.getElementById(tparent);
                    var parent2=parent2.getElementsByTagName("tbody");
                    parent2=parent2[0];

                    while(parent2.hasChildNodes())parent2.removeChild(parent2.firstChild);

                    //加载每页上的数据
                    for(i=barsum*(curpage-1)+1,DEF=0;DEF<barsum&&i<=data[0].now;i++,DEF++)
                    {
                        var tr=document.createElement("tr");

                        //加载id
                        var td1=document.createElement("td");
                        var td1input=document.createElement("input");
                        td1input.setAttribute("type","checkbox");
                        td1input.setAttribute("name",tparent+"cb");
                        td1input.setAttribute("value",data[i].id);
                        td1.appendChild(td1input);
                        td1.innerHTML+=data[i].id;
                        tr.appendChild(td1);

                        //加载时间
                        var td2=document.createElement("td");
                        td2.innerText=data[i].time;
                        tr.appendChild(td2);

                        //加标题
                        var td3=document.createElement("td");
                        var td3a=document.createElement("a");
                        td3a.innerText=data[i].name;
                        td3a.setAttribute("href","#");
                        td3.appendChild(td3a);
                        tr.appendChild(td3);

                        //加载链接查看与信息
                        var td4=document.createElement("td");
                        for(var j=0;j<operate.length;j++)
                        {
                            if(j!=0)
                            {
                                var textnode=document.createTextNode("|");
                                td4.appendChild(textnode);
                            }
                            var a1=document.createElement("a");
                            a1.setAttribute("href","#");
                            a1.innerHTML=operate[j];
                            td4.appendChild(a1);
                        }
                        tr.appendChild(td4);
                        parent2.appendChild(tr);
                    }


                }
            });

        }

    </script>

<script type="text/javascript">
    function allseleck(papername)
    {

        var parent=document.getElementById(papername);
        parent=parent.getElementsByTagName("table");
        parent=parent[0];
        parent=parent.getElementsByTagName("tbody");
        parent=parent[0];
        parent=parent.getElementsByTagName("tr");


        for(var i=0;i<parent.length;i++)
        {
            var son=parent[i].getElementsByTagName("input");
            son=son[0];
            son.checked=true;
        }
    }

</script>


</script>

</head>

<body onload="initData(1,'json/test_data.json','dnewspaper')">


<div  id="leftbar">
         <!--头像-->
         <div id="leftbarHead">
             <div style="text-align: right"><img src="./image/timeright.png" style="width: 25px;height:25px;cursor: pointer;" onclick="changeTIME()" ></div>

             <div id="leftbarBottom">
                 <div id="jrzl" class="leftbarBottom_div"><img src="./image/jrzl.PNG"><span class="Number">68754</span></div>
                 <div id="mg"   class="leftbarBottom_div"><img src="./image/mg.PNG"><span   class="Number">230</span></div>
                 <div id="fmg"  class="leftbarBottom_div"><img src="./image/fmg.PNG"><span  class="Number">66524</span></div>
                 <div id="mgbz" class="leftbarBottom_div"><img src="./image/mgbz.PNG"><span class="Number">3.4%</span></div>
             </div>
         </div>

         <div id="leftbarBody">
             <div id="leftbarBody_Menu">
                 <div class="Menu_fa"><a href="SY.html" class="Menu">首页</a></div>
                 <div class="Menu_fa" id="flip1" ><img src="./image/right.png" style="width: 20px;height: 20px"><span class="Menu">舆情分析</span></div>
                 <div id="Menu_panel1">
                     <div class="Menu_fa"><a href="MTFX.html" class="Menu" style="font-size:15px">媒体分析</a></div>
                     <div class="Menu_fa"><a href="QGFX.html" class="Menu" style="font-size:15px">情感分析</a></div>
                     <div class="Menu_fa"><a href="YQYJ.html" class="Menu" style="font-size:15px">舆情预警</a></div>
                 </div>
                 <div class="Menu_fa"><a href="#" class="Menu">伪舆情分析</a></div>

                 <div class="Menu_fa" id="flip2" ><img src="./image/right.png" style="width:20px;height: 20px"><span class="Menu">舆情报表</span></div>
                 <div id="Menu_panel2">
                     <div class="Menu_fa"><a href="TP.html" class="Menu" style="font-size:15px">时间报表</a></div>
                     <div class="Menu_fa"><a href="SP.html" class="Menu" style="font-size:15px">事件报表</a></div>
                 </div>

             </div>
         </div>
         <div style="clear: both"></div>

    </div>
    <!--右边标题-->
    <div id="cansetTime">
         <div class="cansetTimeR"><span>从<span><input type="date" id="starttime" name="starttime" /></div>
         <div class="cansetTimeR"><span>到<span><input type="date" id="endtime" name="endtime" /></div>
         <button type="button" class="btn btn-primary .btn-sm" style="float: right;margin-right: 5px">确定</button>
    </div>
    <div id="rightbar">
        <img src="./image/nanhua_logo.png"/>
    </div>
    <div  id="rightbody">
          
          
          <!--主体-->
  <div class="container" id="pointnewyq">
       <div class="row">
              <!--Nav tabs-->
              <ul class="nav nav-tabs" role="tablist">
                 <li role="presentation" class="active"><a href="#dnewspaper" aria-controls="dnewspaper" role="tab" data-toggle="tab" onclick="initData(1,'json/test_data.json','dnewspaper')">日报中心</a></li>
                 <li role="presentation"><a href="#wnewspaper" aria-controls="wnewspaper" role="tab" data-toggle="tab" onclick="initData(1,'json/test_data.json','wnewspaper')">周报中心</a></li>
                 <li role="presentation"><a href="#mnewspaper" aria-controls="mnewspaper" role="tab" data-toggle="tab" onclick="initData(1,'json/test_data.json','mnewspaper')">月报中心</a></li>
               
              </ul>
              
              <!--Tab panes-->
               
               <div class="tab-content">
                        <!--日报中心-->
                        <div role="tabpanel" class="tab-pane active" id="dnewspaper" style="padding-top:10px" >
                            <table class="table table-hover table-bordered" >
                                    <thead>
                                         <th style="width:10%;">编号</th>
                                         <th style="width:20%;">时间</th>
                                         <th style="width:50%">报表名称</th>
                                         <th style="width:20%;">操作</th>
                                    </thead> 
                                    <tbody>


                                    
                                    </tbody>  
                            </table>
                            
                            <ul class="pagination pagsize">


                            </ul>
                             <div style="float: right">
                                 <button type="button" class="btn btn-default" onclick="allseleck('dnewspaper')">全选</button>
                                 <button type="button" class="btn btn-default">邮件发送</button>
                                 <button type="button" class="btn btn-default">导出</button>
                             </div>
                                    
                                       
                        </div>
                        <!--周报中心-->
                        <div role="tabpanel" class="tab-pane" id="wnewspaper" style="padding-top:10px" >

                            <table class="table table-hover table-bordered" >
                                <thead>
                                <th style="width:10%;">编号</th>
                                <th style="width:20%;">时间</th>
                                <th style="width:50%">报表名称</th>
                                <th style="width:20%;">操作</th>
                                </thead>
                                <tbody>




                                </tbody>
                            </table>

                            <ul class="pagination pagsize">



                            </ul>

                            <div style="float: right">
                                <button type="button" class="btn btn-default" onclick="allseleck('wnewspaper')">全选</button>
                                <button type="button" class="btn btn-default">邮件发送</button>
                                <button type="button" class="btn btn-default">导出</button>
                            </div>


                        </div>
                        <!--月报中心-->
                        <div role="tabpanel" class="tab-pane" id="mnewspaper"  style="padding-top:10px" >
                            <table class="table table-hover table-bordered" >
                                <thead>
                                <th style="width:10%;">编号</th>
                                <th style="width:20%;">时间</th>
                                <th style="width:50%">报表名称</th>
                                <th style="width:20%;">操作</th>
                                </thead>
                                <tbody>

                                </tbody>
                            </table>

                            <ul class="pagination pagsize">

                            </ul>

                            <div style="float: right" onclick="allseleck('mnewspaper')">
                                <button type="button" class="btn btn-default">全选</button>
                                <button type="button" class="btn btn-default">邮件发送</button>
                                <button type="button" class="btn btn-default">导出</button>
                            </div>

                        </div>


                </div>
              
       </div>
  
  
  </div>

</div>






<!--foot-->




</body>
</html>
